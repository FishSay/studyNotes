```
// ------------获取验证码----------------
    var getCode = $api.byId('getCode');
    var countdown = 60;

    $api.addEvt(getCode, 'click', function() {
        if (countdown < 60) {
            return false;
        } else {
            settime();
        }
    });

    function settime() {
        if (countdown == 0) {
            // $api.rmEvt(getCode, 'click');
            $api.html(getCode, "获&nbsp;取&nbsp;验&nbsp;证&nbsp;码");
            countdown = 60;
            return false;
        } else {
            $api.html(getCode, "重&nbsp;新&nbsp;发&nbsp;送&nbsp;(" + countdown + ")");
            countdown--;
        }

        setTimeout(function() {
            settime();
        }, 1000);
    }

```

# 1.方法2

```javascript
var sending = false;

        function timeStart(total) {
            var remain = total

            function next() {
                window.setTimeout(function () {
                    if (remain < 0) {
                        updateCodeContent('Get SMS Code')
                        sending = false
                    } else {
                        updateCodeContent(remain + ' s')
                        next()
                    }
                    remain--
                }, 1000)
            }
            next()
        }

        function updateCodeContent(cont) {
            $('#sendCode').html(cont)
        }

//点击发送验证码按钮
// 开头加上如下代码
if (sending) {
                return
            }
// ajax后加上如下代码
sending = true;
 timeStart(30);
```

