## 下载与配置

```javascript
npm install vuex --save
npm install vuex-persistedstate // 数据持久化
```

src下新建store文件夹,其中新建index.js

```javascript
import Vue from 'vue'
import Vuex from 'vuex'
import createPersistedState from 'vuex-persistedstate'
Vue.use(Vuex)

const store = new Vuex.Store({
    state: {
		listshop: [] // 键值对形式
    },
    mutations: {
        名字(state, data) {// state 是旧值, data是传进来的值
            return {...state，listshop:data}
        }
        
        // 不好的写法:
        //名字(state, data) {// state 是旧值, data是传进来的值
           // state.listshop = data
        //}
    },
    actions: { // 异步执行操作用的,主要用来执行mutations中的指令
        函数名({commit}) {
            commit()
        }
    },
	plugins: [createPersistedState()]
})

export default store;
```

vue入口方法main.js需要加上`import store from './store'`,并在`new Vue`中加上store,这样在页面中就可以用this.$store命令

```javascript

// 页面
mounted() {
        this.$store.commit('test', '123')

    },
    methods: {
        getChild() {
            console.log(this.$store);
        }
    }

// store

state: {
		listshop: [] 
    },
    mutations: {
        test(state, data) {
            return {...state，listshop:data}
        }
    },
```



```javascript
// 在mounted中log(this.$store)
// 结果

Store {_committing: false, _actions: {…}, _actionSubscribers: Array(0), _mutations: {…}, _wrappedGetters: {…}, …}
commit: ƒ boundCommit(type, payload, options)
dispatch: ƒ boundDispatch(type, payload)
getters: {}
registerModule: (t,r,n)=> {…}
replaceState: t=>{u.initialState=f(t),n(t)}
strict: false
unregisterModule: t=> {…}
_actionSubscribers: []
_actions: {}
_committing: false
_devtoolHook: {Vue: ƒ, _buffer: Array(3), _replayBuffer: ƒ, on: ƒ, once: ƒ, …}
_modules: ModuleCollection {root: Module}
_modulesNamespaceMap: {}
_mutations: {}
_subscribers: (2) [ƒ, ƒ]
_vm: Vue {_uid: 1, _isVue: true, $options: {…}, _renderProxy: Proxy, _self: Vue, …}
_watcherVM: Vue {_uid: 0, _isVue: true, $options: {…}, _renderProxy: Proxy, _self: Vue, …}
_wrappedGetters: {}
state: (...)
__proto__: Object
```

**注意**:其中的commit是执行store中mutations的指令,第一个参数是自己起的指令的名字,第二个参数是要传到仓库中的参数



存进去的数据在log出来的state里